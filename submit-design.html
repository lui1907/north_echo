<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Submit Your Design â€” North Echo</title>

<link rel="stylesheet" href="style.css" />
</head>

<body>

<header class="header">
  <div class="hamburger" id="menuBtn">â˜°</div>
  <a href="index.html" class="logo">NORTH ECHO</a>

  <div class="right-buttons">
    <a href="cart.html" class="cart-icon">ðŸ›’ <span id="cartCount">0</span></a>
    <button id="themeToggle" class="theme-btn">â—‹</button>
  </div>
</header>

<div class="side-menu" id="sideMenu">
  <button id="closeMenu" class="close-menu">Ã—</button>
  <a href="index.html">Home</a>
  <a href="tshirts.html">T-Shirts</a>
  <a href="sweatshirts.html">Sweatshirts</a>
  <a href="submit-design.html">Submit Design</a>
  <a href="cart.html">Cart</a>
</div>

<div class="submit-wrapper">
    <h1>Submit Your Design</h1>

    <form id="designForm">
        <input type="text" id="name" placeholder="Full Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <textarea id="description" placeholder="Describe your design..." rows="5" required></textarea>
        <input type="file" id="file" accept="image/*,.pdf" required>
        <button type="submit">Send Design</button>
    </form>

    <p id="status"></p>
</div>

<script>
document.getElementById("designForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    const file = document.getElementById("file").files[0];
    const reader = new FileReader();

    reader.onload = async function() {
        const base64File = reader.result.split(",")[1];

        const payload = {
            mode: "submitDesign",
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            description: document.getElementById("description").value,
            fileName: file.name,
            fileType: file.type,
            fileData: base64File
        };

        document.getElementById("status").textContent = "Sending...";

        const response = await fetch("https://script.google.com/macros/s/AKfycbxiYtFmG2Gkh97TbFhopCElZlEVb26gEaRb58D546EZOkePCbRIDKeJTNfwoNzAD1zZQA/exec", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });

        const json = await response.json();
        document.getElementById("status").textContent =
            json.success ? "Uploaded successfully!" : "Upload failed!";
    };

    reader.readAsDataURL(file);
});
</script>

<script src="menu.js"></script>
<script src="theme.js"></script>
<script src="cart.js"></script>

</body>
</html>
