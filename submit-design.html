<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Submit Your Design â€” North Echo</title>
<link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- HEADER -->
<header class="header">
  <div class="hamburger" id="menuBtn">â˜°</div>
  <a href="index.html" class="logo">NORTH ECHO</a>

  <div class="right-buttons">
    <a href="cart.html" class="cart-icon">ðŸ›’ <span id="cartCount">0</span></a>
    <button id="themeToggle" class="theme-btn">â—‹</button>
  </div>
</header>

<!-- SIDE MENU -->
<div class="side-menu" id="sideMenu">
  <button id="closeMenu" class="close-menu">Ã—</button>
  <a href="index.html">Home</a>
  <a href="tshirts.html">T-Shirts</a>
  <a href="sweatshirts.html">Sweatshirts</a>
  <a href="submit-design.html">Submit Design</a>
  <a href="cart.html">Cart</a>
</div>

<style>
.submit-wrapper {
    max-width: 600px;
    margin: 120px auto;
    background: var(--card);
    padding: 30px;
    border-radius: 14px;
    border: 1px solid var(--border);
}

.submit-wrapper h1 { text-align: center; }

.submit-wrapper input,
.submit-wrapper textarea {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
}

.submit-wrapper button {
    width: 100%;
    padding: 14px;
    background: var(--text);
    color: var(--bg);
    border-radius: 12px;
    font-weight: bold;
    cursor: pointer;
}

#status { text-align: center; margin-top: 10px; }
</style>

<div class="submit-wrapper">
    <h1>Submit Your Design</h1>

    <form id="designForm">
        <input type="email" id="email" placeholder="Email" required>
        <textarea id="description" placeholder="Describe your design..." rows="5" required></textarea>
        <input type="file" id="file" accept="image/*,.pdf" required>
        <button type="submit">Send Design</button>
    </form>

    <p id="status"></p>
</div>

<script>
document.getElementById("designForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const description = document.getElementById("description").value;
    const file = document.getElementById("file").files[0];

    if (!file) {
        document.getElementById("status").textContent = "Select a file!";
        return;
    }

    document.getElementById("status").textContent = "Sending...";

    const reader = new FileReader();
    reader.onload = async function() {

        const base64Data = reader.result.split(",")[1];

        const payload = {
            mode: "submitDesign",
            email: email,
            description: description,
            fileName: file.name,
            fileType: file.type,
            fileData: base64Data
        };

        try {
            const response = await fetch(
                "https://script.google.com/macros/s/AKfycbxiYtFmG2Gkh97TbFhopCElZlEVb26gEaRb58D546EZOkePCbRIDKeJTNfwoNzAD1zZQA/exec",
                {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                }
            );

            const result = await response.json();
            document.getElementById("status").textContent =
                result.success ? "Uploaded successfully!" : "Upload failed: " + result.error;

        } catch (err) {
            document.getElementById("status").textContent = "Network Error: " + err;
        }
    };

    reader.readAsDataURL(file);
});
</script>

<script src="menu.js"></script>
<script src="theme.js"></script>
<script src="cart.js"></script>

</body>
</html>
